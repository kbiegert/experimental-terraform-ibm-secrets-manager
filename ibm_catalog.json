{
  "products": [
    {
      "name": "deploy-arch-ibm-secrets-manager",
      "label": "Secrets Manager",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "security"
      ],
      "keywords": [
        "secrets",
        "secrets manager",
        "encryption",
        "kms",
        "key protect",
        "security",
        "IaC",
        "infrastructure as code",
        "terraform"
      ],
      "short_description": "Deploys and configures IBM Secrets Manager with encryption and optional IAM engine",
      "long_description": "This deployable architecture provisions and configures an IBM Cloud Secrets Manager instance with KMS encryption. It supports optional IAM credentials engine configuration, Event Notifications integration, and public/private certificate engines. The solution creates a new resource group or uses an existing one, provisions KMS encryption keys, and configures the Secrets Manager instance according to best practices.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-secrets-manager/blob/main/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-secrets-manager/main/images/secrets_manager.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Automated Secrets Manager Provisioning",
          "description": "Automatically provisions IBM Secrets Manager instance with configurable service plans and network access controls"
        },
        {
          "title": "KMS Encryption Integration",
          "description": "Integrates with IBM Key Protect or Hyper Protect Crypto Services for encryption key management with automatic key ring and key creation"
        },
        {
          "title": "IAM Credentials Engine",
          "description": "Optional configuration of IAM credentials engine for dynamic service credential generation"
        },
        {
          "title": "Event Notifications Integration",
          "description": "Optional integration with IBM Event Notifications for lifecycle event monitoring and alerting"
        },
        {
          "title": "Certificate Management",
          "description": "Support for public and private certificate engines with Let's Encrypt integration"
        },
        {
          "title": "Flexible Deployment Options",
          "description": "Deploy new instance or configure existing Secrets Manager with support for both public and private network endpoints"
        }
      ],
      "flavors": [
        {
          "label": "Standard",
          "name": "standard",
          "install_type": "fullstack",
          "working_directory": "solutions/standard",
          "compliance": {},
          "iam_permissions": [
            {
              "service_name": "Resource group only",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "notes": "Viewer access is required in the resource group where you want to provision the Secrets Manager instance."
            },
            {
              "service_name": "secrets-manager",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "notes": "Administrator platform access and Manager service access are required to provision and configure Secrets Manager instances."
            },
            {
              "service_name": "kms",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "Manager service access and Editor platform access are required for Key Protect or Hyper Protect Crypto Services to create encryption keys."
            },
            {
              "service_name": "event-notifications",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "notes": "[Optional] Required only if enabling Event Notifications integration for lifecycle event monitoring."
            }
          ],
          "architecture": {
            "descriptions": "This architecture deploys IBM Secrets Manager with KMS encryption, optional IAM engine, and Event Notifications integration. It creates or uses an existing resource group, provisions KMS keys for encryption, and configures the Secrets Manager instance with the specified settings.",
            "features": [
              {
                "title": "Secrets Manager Instance",
                "description": "Provisions IBM Secrets Manager with configurable service plan (standard or trial) and network access controls"
              },
              {
                "title": "KMS Encryption",
                "description": "Creates KMS key ring and root key for Secrets Manager encryption, or uses existing keys"
              },
              {
                "title": "IAM Credentials Engine",
                "description": "Optionally configures IAM credentials engine for dynamic service credential generation"
              },
              {
                "title": "Event Notifications",
                "description": "Optionally integrates with Event Notifications for lifecycle event monitoring with email subscriptions"
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Secrets Manager Architecture",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-secrets-manager/main/reference-architecture/secrets_manager.svg",
                  "type": "image/svg+xml"
                },
                "description": "Architecture diagram showing Secrets Manager deployment with KMS encryption, IAM engine, and Event Notifications integration"
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key",
              "type": "password",
              "default_value": "__NOT_SET__",
              "description": "The IBM Cloud API key to deploy resources",
              "display_name": "IBM Cloud API Key",
              "required": true
            },
            {
              "key": "provider_visibility",
              "type": "string",
              "description": "Set the visibility value for the IBM terraform provider. Supported values are `public`, `private`, `public-and-private`.",
              "display_name": "Provider Visibility",
              "default_value": "private",
              "required": true,
              "options": [
                {
                  "displayname": "Private",
                  "value": "private"
                },
                {
                  "displayname": "Public",
                  "value": "public"
                },
                {
                  "displayname": "Public and Private",
                  "value": "public-and-private"
                }
              ]
            },
            {
              "key": "use_existing_resource_group",
              "type": "boolean",
              "default_value": false,
              "description": "Whether to use an existing resource group",
              "display_name": "Use Existing Resource Group",
              "required": true
            },
            {
              "key": "resource_group_name",
              "type": "string",
              "default_value": "secret-manager-rg",
              "description": "The name of a new or existing resource group to provision resources to. If a prefix is specified, it's added to the value in the `<prefix>-value` format.",
              "display_name": "Resource Group Name",
              "required": false
            },
            {
              "key": "region",
              "type": "string",
              "default_value": "us-south",
              "description": "The region to provision resources to",
              "display_name": "Region",
              "required": true
            },
            {
              "key": "prefix",
              "type": "string",
              "default_value": "",
              "description": "The prefix to add to all resources created by this solution. To not use any prefix value, you can set this value to `null` or an empty string.",
              "display_name": "Prefix",
              "required": false
            },
            {
              "key": "secrets_manager_instance_name",
              "type": "string",
              "default_value": "secrets-manager",
              "description": "The name to give the Secrets Manager instance provisioned by this solution. If a prefix is specified, it is added to the value in the `<prefix>-value` format.",
              "display_name": "Secrets Manager Instance Name",
              "required": true
            },
            {
              "key": "existing_secrets_manager_crn",
              "type": "string",
              "default_value": "",
              "description": "The CRN of an existing Secrets Manager instance. If not supplied, a new instance is created.",
              "display_name": "Existing Secrets Manager CRN",
              "required": false
            },
            {
              "key": "service_plan",
              "type": "string",
              "default_value": "standard",
              "description": "The pricing plan to use when provisioning a Secrets Manager instance. Possible values: `standard`, `trial`.",
              "display_name": "Service Plan",
              "required": true,
              "options": [
                {
                  "displayname": "Standard",
                  "value": "standard"
                },
                {
                  "displayname": "Trial",
                  "value": "trial"
                }
              ]
            },
            {
              "key": "secrets_manager_tags",
              "type": "array",
              "default_value": [],
              "description": "The list of resource tags you want to associate with your Secrets Manager instance",
              "display_name": "Secrets Manager Tags",
              "required": false
            },
            {
              "key": "iam_engine_enabled",
              "type": "boolean",
              "default_value": false,
              "description": "Set this to true to configure a Secrets Manager IAM credentials engine. If set to false, no IAM engine will be configured for your instance.",
              "display_name": "Enable IAM Engine",
              "required": true
            },
            {
              "key": "iam_engine_name",
              "type": "string",
              "default_value": "iam-engine",
              "description": "The name of the IAM engine used to configure a Secrets Manager IAM credentials engine. If the prefix input variable is passed it is attached before the value in the format of '<prefix>-value'.",
              "display_name": "IAM Engine Name",
              "required": false
            },
            {
              "key": "skip_kms_iam_authorization_policy",
              "type": "boolean",
              "default_value": false,
              "description": "Set to true to skip the creation of an IAM authorization policy that permits all Secrets Manager instances in the resource group to read the encryption key from the KMS instance.",
              "display_name": "Skip KMS IAM Authorization Policy",
              "required": true
            },
            {
              "key": "existing_secrets_manager_kms_key_crn",
              "type": "string",
              "default_value": "",
              "description": "The CRN of a Key Protect or Hyper Protect Crypto Services key to use for Secrets Manager. If not specified, a key ring and key are created.",
              "display_name": "Existing KMS Key CRN",
              "required": false
            },
            {
              "key": "existing_kms_instance_crn",
              "type": "string",
              "default_value": "",
              "description": "The CRN of the KMS instance (Hyper Protect Crypto Services or Key Protect). Required only if `existing_secrets_manager_crn` or `existing_secrets_manager_kms_key_crn` is not specified.",
              "display_name": "Existing KMS Instance CRN",
              "required": false
            },
            {
              "key": "kms_endpoint_type",
              "type": "string",
              "default_value": "private",
              "description": "The type of endpoint to use for communicating with the Key Protect or Hyper Protect Crypto Services instance. Possible values: `public`, `private`.",
              "display_name": "KMS Endpoint Type",
              "required": true,
              "options": [
                {
                  "displayname": "Private",
                  "value": "private"
                },
                {
                  "displayname": "Public",
                  "value": "public"
                }
              ]
            },
            {
              "key": "kms_key_ring_name",
              "type": "string",
              "default_value": "secrets-manager-key-ring",
              "description": "The name for the new key ring to store the key. If a prefix is passed, it is added to the value in the `<prefix>-value` format.",
              "display_name": "KMS Key Ring Name",
              "required": false
            },
            {
              "key": "kms_key_name",
              "type": "string",
              "default_value": "secrets-manager-key",
              "description": "The name for the new root key. If a prefix is passed, it is added to the value in the `<prefix>-value` format.",
              "display_name": "KMS Key Name",
              "required": false
            },
            {
              "key": "ibmcloud_kms_api_key",
              "type": "password",
              "default_value": "",
              "description": "The IBM Cloud API key that can create a root key and key ring in the key management service (KMS) instance. If not specified, the 'ibmcloud_api_key' variable is used.",
              "display_name": "IBM Cloud KMS API Key",
              "required": false
            },
            {
              "key": "enable_event_notifications",
              "type": "boolean",
              "default_value": false,
              "description": "Set this to true to enable lifecycle notifications for your Secrets Manager instance by connecting an Event Notifications service. When setting this to true, a value must be passed for `existing_event_notification_instance_crn`",
              "display_name": "Enable Event Notifications",
              "required": true
            },
            {
              "key": "existing_event_notifications_instance_crn",
              "type": "string",
              "default_value": "",
              "description": "The CRN of the Event Notifications service used to enable lifecycle notifications for your Secrets Manager instance",
              "display_name": "Existing Event Notifications Instance CRN",
              "required": false
            },
            {
              "key": "skip_event_notifications_iam_authorization_policy",
              "type": "boolean",
              "default_value": false,
              "description": "If set to true, this skips the creation of a service to service authorization from Secrets Manager to Event Notifications",
              "display_name": "Skip Event Notifications IAM Authorization Policy",
              "required": true
            },
            {
              "key": "event_notifications_email_list",
              "type": "array",
              "default_value": [],
              "description": "The list of email addresses to target when Secrets Manager triggers an event",
              "display_name": "Event Notifications Email List",
              "required": false
            },
            {
              "key": "event_notifications_from_email",
              "type": "string",
              "default_value": "compliancealert@ibm.com",
              "description": "The email address used to send any Secrets Manager event coming via Event Notifications",
              "display_name": "Event Notifications From Email",
              "required": false
            },
            {
              "key": "event_notifications_reply_to_email",
              "type": "string",
              "default_value": "no-reply@ibm.com",
              "description": "The email address specified in the 'reply_to' section for any Secret Manager event coming via Event Notifications",
              "display_name": "Event Notifications Reply To Email",
              "required": false
            },
            {
              "key": "cbr_rules",
              "type": "array",
              "default_value": [],
              "description": "(Optional, list) List of CBR rules to create",
              "display_name": "CBR Rules",
              "required": false
            }
          ],
          "outputs": [
            {
              "key": "secrets_manager_id",
              "description": "ID of the Secrets Manager instance"
            },
            {
              "key": "secrets_manager_crn",
              "description": "CRN of the Secrets Manager instance"
            },
            {
              "key": "secrets_manager_guid",
              "description": "GUID of Secrets Manager instance"
            },
            {
              "key": "secrets_manager_name",
              "description": "Name of the Secrets Manager instance"
            },
            {
              "key": "secrets_manager_region",
              "description": "Region of the Secrets Manager instance"
            },
            {
              "key": "resource_group_id",
              "description": "Resource group ID"
            },
            {
              "key": "resource_group_name",
              "description": "Resource group name"
            }
          ],
          "install_type": "fullstack"
        }
      ]
    }
  ]
}